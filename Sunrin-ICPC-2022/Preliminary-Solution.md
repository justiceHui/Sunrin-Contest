# 제6회 천하제일 코딩대회 예선 풀이

### A. 심준의 병역판정검사

문제에서 주어진 표를 꼼꼼하게 조건문으로 옮기면 해결할 수 있습니다. C, C++, Java에서 정수 나눗셈의 결과는 정수라는 것에 주의해야 합니다.

### B. 11월 11일

$m$월 $m$일의 $m$일 전은 $m-1$월 말일입니다. 윤년이 주어지는 경우와 해가 바뀌는 경우에 주의해야 합니다.

### C. 순열 정렬

맨 앞에 있는 수는 최대한 작게 만드는 것이 좋습니다. 마찬가지로, 두 번째 수도 맨 앞에 있는 수보다 크거나 같은 수 중에서 가장 작은 수로 만드는 것이 좋습니다.<br>수어진 수열을 앞에서부터 차례대로 보면서, 바로 앞에 있는 수보다 크거나 같은 수 중에서 가장 작은 값이 되도록 연산을 수행하면 됩니다. 만약 $i$와 $N-i+1$ 모두 앞에 있는 수보다 크면 순열을 정렬할 수 없습니다.

### D. 영어 시험

입력으로 주어진 문자열을 $N$번 출력하면 됩니다. 이 문자열이 왜 조건을 만족하는 **가장 짧은** 문자열인지 고민해 보세요.

### E. 가장 긴 등차 부분 수열

여러가지 풀이가 존재합니다.<br>수열의 길이를 $N$, 수의 범위를 $X = 100$이라고 할 때, $O(NX\log X)$, $O(NX)$ 등 다양한 풀이가 존재합니다.

##### solution 1. $O(NX \log X)$ - PE-slow.* 코드 참고

$X(i,c)$를 $i$번째 수보다 뒤에 있는 $c$ 중 가장 앞에 있는 $c$의 인덱스라고 정의합시다. 아래와 같이 $O(NX)$ 시간에 전처리할 수 있습니다.

```cpp
int X[101010][111], Last[111]; // Last[c] = c가 등장하는 가장 빠른 위치
for(int i=0; i<111; i++) Last[i] = -1;
for(int i=N; i>=1; i--){
    for(int j=0; j<111; j++) X[i][j] = Last[j];
    Last[A[i]] = i;
}
```

공차가 $d$인 등차 부분 수열의 길이를 구하는 방법을 생각해 봅시다.<br>수열의 모든 원소 $A_i$에 대해, $A_i$부터 시작해서 $A_i+d, A_i+2d, A_i+3d, \cdots$를 직접 찾는 방법이 가장 먼저 떠오를 것입니다. 이 작업은 위에서 구한 $X$를 이용해 빠르게 수행할 수 있습니다.

```cpp
for(int i=1; i<=N; i++){ // A[i]에서 시작
    int len = 0;
    for(int j=i; j!=-1; ){
        len += 1;
        int nxt = A[j] + d;
        if(1 <= nxt && nxt <= 100) j = X[j][nxt];
        else break;
    }
}
```

이 방법을 이용하면 공차 $d$와 시작 지점 $A_i$가 주어졌을 때, 등차 부분 수열의 길이에 비례하는 연산만으로 길이를 구할 수 있습니다.

수의 범위는 최대 $X$이기 때문에 공차가 $d$인 부분 수열의 최대 길이는 $X / d$입니다. $X/1 + X/2 + X/3 + \cdots + X/X \approx O(X\log X)$이므로, 각 시작점에 대해 $O(X \log X)$ 시간에 모든 공차에 대한 가장 긴 등차 부분 수열을 찾을 수 있습니다.<br>$N$개의 시작점에 대해 위 작업을 모두 수행하면 $O(NX \log X)$에 문제를 해결할 수 있습니다.

공차가 $d = 0$인 경우는 따로 처리해야 합니다.

##### solution 2. $O(NX)$ - PE-fast.* 코드 참고

마지막 원소가 $x$인 공차가 $d$인 등차 부분 수열의 최대 길이를 $D(d, x)$라고 정의합시다. 주어진 수열을 앞에서부터 차례대로 보면, $D(d, A_i)$는 $D(d, A_i-d) + 1$을 이용해 구할 수 있다는 것을 알 수 있습니다.

각 원소마다 $O(X)$개의 상태만 변경하므로 $O(NX)$ 시간에 정답을 구할 수 있습니다.